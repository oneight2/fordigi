(function(e,t){"use strict";var n="",s=s||function(s,a){var i=function(){},l={apiKey:n,element:null,user:null,channelId:null,fullscreen:!1,accent:"#fff",controls:!0,annotations:!1,autoplay:!1,chainVideos:!0,browsePlaylists:!1,playerTheme:"dark",listTheme:"dark",responsive:!1,playId:"",sortList:!1,reverseList:!1,shuffleList:!1,maxvideo:10,maxplaylist:20,wmode:"opaque",events:{videoReady:i,stateChange:i}},o={data:{},remove:function(e){delete o.data[e]},exist:function(e){return o.data.hasOwnProperty(e)&&null!==o.data[e]},get:function(e){return o.data[e]},set:function(e,t){o.remove(e),o.data[e]=t}},r={events:{addEvent:function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):void 0},removeEvent:function(e,t,n){return e.addEventListener?e.removeEventListener(t,n,!1):e.attachEvent?e.detachEvent("on"+t,n):void 0},prevent:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}},addCSS:function(e){var n=t.getElementsByTagName("head")[0],s=t.createElement("style");s.type="text/css",s.styleSheet?s.styleSheet.cssText=e:s.appendChild(t.createTextNode(e)),n.appendChild(s)},addCommas:function(e){for(var t=e.split("."),n=t[0],s=t.length>1?"."+t[1]:"",a=/(\d+)(\d{3})/;a.test(n);)n=n.replace(a,"$1,$2");return n+s},parentUntil:function(e,t){for(;e.parentNode;){if(e.getAttribute&&e.getAttribute(t))return e;e=e.parentNode}return null},ajax:{get:function(t,n){var s;o.exist(t)?n.call(this,JSON.parse(o.get(t))):(e.XDomainRequest&&-1!=navigator.appVersion.indexOf("MSIE 8")&&-1!=navigator.appVersion.indexOf("MSIE 9")?(s=new XDomainRequest).onload=function(){if(o.set(t,s.responseText),n.call(this,JSON.parse(s.responseText)),Object.prototype.hasOwnProperty.call(JSON.parse(s.responseText),"error")){o.remove(t);var e=JSON.parse(s.responseText);console.log("Youtube-TV Error: Youtube API Response: "+e.error.errors[0].reason+"\nDetails: "+e.error.errors[0].message)}}:e.XMLHttpRequest&&(s=new XMLHttpRequest),s.onreadystatechange=function(){if(4===s.readyState&&200===s.status)o.set(t,s.responseText),n.call(this,JSON.parse(s.responseText));else if(4===s.readyState){var e=JSON.parse(s.responseText);console.log("Youtube-TV Error: Youtube API Response: "+e.error.errors[0].reason+"\nDetails: "+e.error.errors[0].message)}},s.open("GET",t,!0),s.send())}},endpoints:{base:"https://www.googleapis.com/youtube/v3/",userInfo:function(){return r.endpoints.base+"channels?"+l.cid+"&key="+n+"&part=snippet,contentDetails,statistics"},playlistInfo:function(e){return r.endpoints.base+"playlists?id="+e+"&key="+n+"&maxResults="+l.maxplaylist+"&part=snippet"},userPlaylists:function(){return r.endpoints.base+"playlists?channelId="+l.channelId+"&key="+n+"&maxResults="+l.maxplaylist+"&part=snippet"},playlistVids:function(){return r.endpoints.base+"playlistItems?playlistId="+l.pid+"&key="+n+"&maxResults="+l.maxvideo+"&part=contentDetails"},videoInfo:function(){return r.endpoints.base+"videos?id="+l.videoString+"&key="+n+"&maxResults="+l.maxvideo+"&part=snippet,contentDetails,status,statistics"}},deepExtend:function(e,t){var n;for(n in t)t[n]&&t[n].constructor&&t[n].constructor===Object?(e[n]=e[n]||{},r.deepExtend(e[n],t[n])):e[n]=t[n];return e}},d={youtube:function(){if("undefined"==typeof YT){var e=t.createElement("script");e.src="https://www.youtube.com/iframe_api";var n=t.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}},build:function(){l.channelId?l.cid="id="+l.channelId:l.user&&(l.cid="forUsername="+l.user),l.element.className="ytv-canvas",l.fullscreen&&(l.element.className+=" ytv-full"),r.addCSS("#"+s+" .ytv-list .ytv-active a{border-left-color: "+l.accent+";}"),l.responsive&&r.addCSS("#"+s+" .ytv-video{position: relative; padding-bottom: 39.4%; /* 16:9 of 70%*/height: 0; width: 70%;} #"+s+" .ytv-video iframe{position: absolute; top: 0; left: 0;} #"+s+" .ytv-list{width: 30%;}@media only screen and (max-width:992px) {#"+s+" .ytv-list{position: relative; display: block;width: 0; padding-bottom: 40%;left: auto; right: auto;top: auto; width: 100%;} #"+s+" .ytv-video{position: relative; padding-bottom: 56.25%; /* 16:9 */height: 0; position: relative;display: block; left: auto;right: auto; top: auto; width: 100%;}}"),"dark"==l.listTheme&&r.addCSS(""),"light"==l.listTheme&&r.addCSS("")},userUploads:function(e){e&&e.items.length>0?(l.pid=e.items[0].contentDetails.relatedPlaylists.uploads,r.ajax.get(r.endpoints.playlistVids(),d.compileVideos)):console.log("Youtube-TV Error: API returned no matches for: "+(l.channelId?l.channelId:l.user)+"\nPlease ensure it was entered correctly and in the appropriate field shown below. \nuser: 'username' or channelId: 'UCxxxx...'")},selectedPlaylist:function(e){e&&e.items.length>0?(l.channelId||l.user||(l.cid="id="+(l.channelId=e.items[0].snippet.channelId)),l.currentPlaylist=e.items[0].snippet.title,l.pid=e.items[0].id,r.ajax.get(r.endpoints.playlistVids(),d.compileVideos)):console.log("Youtube-TV Error: API returned no matches for playlist(s): "+l.playlist)},compileVideos:function(e){if(e&&e.items.length>0){var t,n=e.items;for(l.videoString="",t=0;t<n.length;t++)l.videoString+=n[t].contentDetails.videoId,t<n.length-1&&(l.videoString+=",");r.ajax.get(r.endpoints.videoInfo(),d.compileList)}else console.log("Youtube-TV Error: Empty playlist")},playlists:function(e){if(e&&e.items.length>0){var t,n='<div class="ytv-playlists">',s=e.items;for(t=0;t<s.length;t++){var a={title:s[t].snippet.title,plid:s[t].id,thumb:s[t].snippet.thumbnails.medium.url};n+='<a href="#" data-ytv-playlist="'+a.plid+'">',n+='<div class="ytv-thumb"><div class="ytv-thumb-stroke"></div><img src="'+a.thumb+'"></div>',n+="<span>"+a.title+"</span>",n+="</a>"}n+="</div>";var i=l.element.getElementsByClassName("ytv-list-header")[0],o=i.children[0];o.href="#",o.target="",o.setAttribute("data-ytv-playlist-toggle","true"),l.element.getElementsByClassName("ytv-list-header")[0].innerHTML+=n,i.className+=" ytv-has-playlists"}else console.log("Youtube-TV Error: Returned no playlists")},compileList:function(e){e&&e.items.length>0?r.ajax.get(r.endpoints.userInfo(),function(t){var n,s="",a={title:t.items[0].snippet.title,url:"//youtube.com/channel/"+t.items[0].id,thumb:t.items[0].snippet.thumbnails.default.url,summary:t.items[0].snippet.description,subscribers:t.items[0].statistics.subscriberCount,views:t.items[0].statistics.viewCount},i=e.items,o=!0;for(l.channelId=t.items[0].id,l.currentPlaylist&&(a.title+=" &middot; "+l.currentPlaylist),l.sortList&&i.sort(function(e,t){return e.snippet.publishedAt>t.snippet.publishedAt?-1:e.snippet.publishedAt<t.snippet.publishedAt?1:0}),l.reverseList&&i.reverse(),l.shuffleList&&(i=function(){for(var e,t,n=i.length;n;e=Math.floor(Math.random()*n),t=i[--n],i[n]=i[e],i[e]=t);return i}()),s+='<div class="ytv-list-header">',s+='<a href="'+a.url+'" target="_blank">',s+="<span>"+a.title+"</span>",s+="</a>",s+="</div>",s+='<div class="ytv-list-inner"><ul>',n=0;n<i.length;n++)if(i[n].status.embeddable){var u={title:i[n].snippet.title,slug:i[n].id,link:"https://www.youtube.com/watch?v="+i[n].id,published:i[n].snippet.publishedAt,stats:i[n].statistics,duration:i[n].contentDetails.duration,thumb:i[n].snippet.thumbnails.medium.url},c=0,v=0,y=0,m="";u.duration.match(/[0-9]+[HMS]/g).forEach(function(e){var t=e.charAt(e.length-1),n=parseInt(e.slice(0,-1));switch(t){case"H":c=n>9?""+n:"0"+n;break;case"M":v=n>9?""+n:"0"+n;break;case"S":y=n>9?""+n:"0"+n}}),c&&(m+=c+":"),m+=v?v+":":"00:",m+=y||"00";var f="";l.playId==u.slug?(f=' class="ytv-active"',o=u.slug):!0===o&&(o=u.slug),s+="<li"+f+'><a href="#" data-ytv="'+u.slug+'" class="ytv-clear">',s+='<div class="ytv-thumb"><div class="ytv-thumb-stroke"></div><span>'+m+'</span><img src="'+u.thumb+'"></div>',s+='<div class="ytv-content">'+u.title,u.stats&&(s+='</b><span class="ytv-views">'+r.addCommas(u.stats.viewCount)+" Views</span>"),s+="</div></a></li>"}s+="</ul></div>",l.element.innerHTML='<div class="ytv-relative"><div class="ytv-video"><div id="ytv-video-player"></div></div><div class="ytv-list">'+s+"</div></div>",0===l.element.getElementsByClassName("ytv-active").length&&(l.element.getElementsByTagName("li")[0].className="ytv-active");var h=l.element.getElementsByClassName("ytv-active")[0];h.parentNode.parentNode.scrollTop=h.offsetTop,p.logic.loadVideo(o,l.autoplay),l.playlist?r.ajax.get(r.endpoints.playlistInfo(l.playlist),d.playlists):l.browsePlaylists&&r.ajax.get(r.endpoints.userPlaylists(),d.playlists)}):console.log("Youtube-TV Error: Empty video list")}},p={logic:{playerStateChange:function(e){console.log(e)},loadVideo:function(e,n){var a=l.element.getElementsByClassName("ytv-video")[0],i=l.element.getElementsByClassName("ytv-video-playerContainer").length;a.innerHTML='<div id="ytv-video-player'+s+i+'" class="ytv-video-playerContainer"></div>',o.player=new YT.Player("ytv-video-player"+s+i,{videoId:e,events:{onReady:l.events.videoReady,onStateChange:function(e){0===e.target.getPlayerState()&&l.chainVideos&&l.element.getElementsByClassName("ytv-active")[0].nextSibling.children[0].click();l.events.stateChange.call(this,e)}},playerVars:{enablejsapi:1,origin:t.domain,controls:l.controls?1:0,rel:0,showinfo:0,iv_load_policy:l.annotations?"":3,autoplay:n?1:0,theme:l.playerTheme,wmode:l.wmode}})}},endpoints:{videoClick:function(e){var t=r.parentUntil(e.target?e.target:e.srcElement,"data-ytv");if(t&&t.getAttribute("data-ytv")){r.events.prevent(e);var n,s=l.element.getElementsByClassName("ytv-active");for(n=0;n<s.length;n++)s[n].className="";t.parentNode.className="ytv-active",p.logic.loadVideo(t.getAttribute("data-ytv"),!0)}},playlistToggle:function(e){var t=r.parentUntil(e.target?e.target:e.srcElement,"data-ytv-playlist-toggle");if(t&&t.getAttribute("data-ytv-playlist-toggle")){r.events.prevent(e);var n=l.element.getElementsByClassName("ytv-list-header")[0];-1===n.className.indexOf("ytv-playlist-open")?n.className+=" ytv-playlist-open":n.className=n.className.replace(" ytv-playlist-open","")}},playlistClick:function(e){var t=r.parentUntil(e.target?e.target:e.srcElement,"data-ytv-playlist");t&&t.getAttribute("data-ytv-playlist")&&(r.events.prevent(e),l.pid=t.getAttribute("data-ytv-playlist"),t.children[1].innerHTML="Loading...",r.ajax.get(r.endpoints.playlistInfo(l.pid),function(e){var t=l.element.getElementsByClassName("ytv-list-header")[0];t.className=t.className.replace(" ytv-playlist-open",""),d.selectedPlaylist(e)}))}},bindEvents:function(){r.events.addEvent(l.element,"click",p.endpoints.videoClick),r.events.addEvent(l.element,"click",p.endpoints.playlistToggle),r.events.addEvent(l.element,"click",p.endpoints.playlistClick)}};this.destroy=function(){r.events.removeEvent(l.element,"click",p.endpoints.videoClick),r.events.removeEvent(l.element,"click",p.endpoints.playlistToggle),r.events.removeEvent(l.element,"click",p.endpoints.playlistClick),l.element.className="",l.element.innerHTML=""},this.fullscreen={state:function(){return-1!==l.element.className.indexOf("ytv-full")},enter:function(){-1===l.element.className.indexOf("ytv-full")&&(l.element.className+="ytv-full")},exit:function(){-1!==l.element.className.indexOf("ytv-full")&&(l.element.className=l.element.className.replace("ytv-full",""))}},function(e,s){r.deepExtend(l,s),0===l.apiKey.length&&alert("Missing APIkey in settings or as global vaiable."),n=l.apiKey,l.element="string"==typeof e?t.getElementById(e):e,l.element&&(l.user||l.channelId||l.playlist)?(d.youtube(),d.build(),p.bindEvents(),l.playlist?r.ajax.get(r.endpoints.playlistInfo(l.playlist),d.selectedPlaylist):r.ajax.get(r.endpoints.userInfo(),d.userUploads)):console.log("Youtube-TV Error: Missing either user, channelId, or playlist")}(s,a)};"undefined"!=typeof module&&module.exports&&(module.exports=s),"undefined"==typeof ender&&(this.YTV=s),"function"==typeof define&&define.amd&&define("YTV",[],function(){return s}),"undefined"!=typeof jQuery&&jQuery.fn.extend({ytv:function(e){return this.each(function(){new s(this.id,e)})}})}).call(this,window,document),function(e){"use strict";e(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/tme-youtube_tv.default",function(e){e.find(".tme-youtube-tv").ytv({apiKey:e.find(".tme-youtube-tv").data("tvapikey"),user:e.find(".tme-youtube-tv").data("username"),channelId:e.find(".tme-youtube-tv").data("channelid"),browsePlaylists:e.find(".tme-youtube-tv").data("browseplaylists"),maxvideo:e.find(".tme-youtube-tv").data("maxvideo"),maxplaylist:e.find(".tme-youtube-tv").data("maxplaylist"),controls:!0,autoplay:!1})})})}(jQuery);